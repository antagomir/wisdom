 %% unilaiva-songbook
 %% =================
 %%
 %% Collection of songs etc
 %%
 
\documentclass[twoside,10pt]{book}
\usepackage[finnish,english]{babel}\selectlanguage{english}

\usepackage[utf8x]{inputenc}
% Add option 'sfdefault' to use the sans serif version as default font,
% which is used in non-song texts. It takes a bit more space.
\usepackage[scaled=1.05]{noto}
\usepackage[T1]{fontenc}

\usepackage[bookmarks,unicode]{hyperref} % used by 'songs' package for index links in PDF
  \hypersetup{linkbordercolor=0.5 0.9 0.6,
              pdftitle=Unilaiva songbook,
              unicode=true}
% NOTE: earlier (Mielikinetiikka times) we used tmargin=20mm to be in sync with inner margin. The minimum
%       (for the "default" printer seems to be 16mm)
%       as it was in earlier versions
\usepackage[a5paper,inner=20mm,outer=10mm,tmargin=16mm,bmargin=10mm,headsep=6.5mm,headheight=3.5mm,nofoot]{geometry} % page size + margins
\usepackage{graphicx}
\usepackage{pdfpages} % for cover page
% \usepackage[font=footnotesize]{caption}
\usepackage{array} % used at leat in Technical Information chapter
\usepackage{color}
% Disable all warnings issued by latex starting with "You have requested package..." to allow
% warningless loading of packages from subdirectories without setting environment variables
% (can be omitted, but warnings will appear):
\usepackage{silence}\WarningFilter{latex}{You have requested package}

\usepackage{xstring}

% The most important 'songs' package, use the version in the project tree:
\usepackage[chorded]{ext_packages/songs/songs}

\graphicspath{ {./content/img/} } % graphicx: set path to find images from

\definecolor{chordcolor}{rgb}{0.3,0,0.4} % color: use this for chords
\definecolor{notehintcolor}{rgb}{0.0,0.32,0.38} % color: use this for circled note names
\definecolor{mbarcolor}{rgb}{0.8,0.7,0.9} % color: use this for measure bars (lighter color)
\definecolor{verylightgray}{rgb}{0.92,0.92,0.92} % color: use this for song number bg & textnote bg (lighter gray)

\renewcommand{\snumbgcolor}{verylightgray} % songs: song number (in prelude) background color
\renewcommand{\notebgcolor}{verylightgray} % songs: \musicnote and \textnote background color
\renewcommand{\idxbgcolor}{verylightgray} % songs: index alphabet sectino background color

\songcolumns{1} % songs: number of columns per page in songs environment  
\songpos{3} % songs: song same column-page-doublepage positioning aggressiveness 0-3
\noversenumbers % songs: do not display verse numbers
\renewcommand{\lyricfont}{\sffamily\large} % songs: modify lyrics font style
% songs: modify chord font style (add color and make smaller):
\renewcommand\printchord[1]{\sffamily\bfseries\small\color{chordcolor}#1}
% songs: modify meter class font style (add color):
\renewcommand{\meterfont}{\color{chordcolor}\scriptsize\sffamily\upshape}
\renewcommand{\notefont}{\normalsize} % songs: modify \textnote and \musicnote font (make smaller)
% songs: use same text color for music notes as for chords:
\renewcommand\musicnote[1]{\ifchorded\textnote{\color{chordcolor}#1}\fi}%
\renewcommand{\clineparams}{ % distance of chords to lyrics (needed because of font scaling)
  \baselineskip=10.6pt
  \lineskiplimit=-2pt
  \lineskip=-2pt
}
% songs: make capo note smaller
\renewcommand\capo[1]{%
  \iftranscapos\transpose{#1}\else\musicnote{{\scriptsize capo #1}}\fi%
}
% songs: reduces line spacing in non-chorded lyrics by the amount the chords would take space
%        without needing to set \chordsoff; also removes measure bar lines. Commented out for
%        now:
% \setlength\baselineadj{-\baselineskip}

% \renewcommand{\chaptername}{Part} % would set chapter name to 'Part', does not work with babel
%\addto\captionsfinnish{\renewcommand\chaptername{Part}} % sets chapter name to Part when babel: finnish
\addto\captionsenglish{\renewcommand\chaptername{Part}} % sets chapter name to Part when babel: english
% \renewcommand{\thechapter}{\Alph{chapter}} %% use alphabets instead of numbers for chapters

% Comment the following line out if you don't want extra info shown in song preludes.
% Define it for a song by adding ex= parameter to \beginsong
% It can be used to for example indicate the origins or a language of a song.
\newcommand{\showextrainfo}{} % comment this line out if you don't want extra info shown (ex=?)

% Comment the following line out if you don't want tag lists shown in song preludes
% Define a list of tags for a song by adding tags= parameter to \beginsong
% It is supposed to be a short list of single word tags of which an index is created.
\newcommand{\showtaglist}{} % comment this line out if you don't want tag list shown (tags=?)

\newcommand{\shownotes}{} % comment this line out if you don't want note hints shown (circled note names)


% More commands and environments; contains rewrites of some commands in the songs package.
% Depends on some of the settings (ie. colors) defined above.
\input{unilaiva-songbook-extra.tex}


% songs: create indexes
\newindex{titleidx}{idx_unilaiva-songbook_title}
\newauthorindex{authidx}{idx_unilaiva-songbook_auth}
\newscripindex{tagidx}{idx_unilaiva-songbook_tag}


\begin{document}

  \begin{titlepage}
    \includepdf[]{content/img/COVER.pdf}
    \thispagestyle{empty}
    \topskip0pt
    \vspace*{\fill}
    \begin{center}
      \Huge Unilaiva songbook\\
      \normalsize \textit{paths to higher knowledge}\\
      \Large
      \vspace{3em}
      By:\\
      \textbf{humankind}\\
      \vspace{1em}
      Version:\\
      \the\year-\the\month-\the\day \textit{ beta}
      \\
      \vspace*{\fill}
      % Created by: qrencode -s 16 -l M -o content/img/QR_https_unilaiva_aavalla_net.png "https://unilaiva.aavalla.net/"
      \includegraphics[width=0.25\textwidth]{QR_https_unilaiva_aavalla_net.png}
      \\
      {\small\url{https://unilaiva.aavalla.net/}}
      \\
      \vspace*{\fill}
      {\footnotesize Compiled by: antagomir \& larva (\href{mailto:lari.natri@iki.fi}{lari.natri@iki.fi})}
      \\
      \vspace{1.5em}
      {\scriptsize
        The material in this book is collected from various sources over time.\\
        \vspace{-1em} % workaround for too large line spacing
        This is a work in progress, and made for the contributors' private use.
        \vspace{-1em} % workaround for too large line spacing
      }
    \end{center}
  \end{titlepage}

  \tableofcontents % TODO: make two-column TOC using perhaps multitoc package

  \clearpage\scleardpage
  \songchapter{Saṃskṛtam}
     \section{About mantras}
       \input{content/section_mantra_explanation.tex}
     \clearpage\scleardpage
    \section{Hindu Bhajans \& Mantras}
      \begin{songs}{titleidx,authidx,tagidx}
        \setcounter{songnum}{100}
        \input{content/songs_sanskrit_hindu.tex}
      \end{songs}
     \scleardpage
    \section{Tibetan Buddhist Mantras}
      \begin{songs}{titleidx,authidx,tagidx}
        \setcounter{songnum}{150}
        \input{content/songs_sanskrit_buddhist.tex}
      \end{songs}

  \clearpage\scleardpage
  \songchapter{English}
    \begin{songs}{titleidx,authidx,tagidx}
      \setcounter{songnum}{200}
      \input{content/songs_english.tex}
    \end{songs}

  \clearpage\scleardpage
  \songchapter{Español}
    \begin{songs}{titleidx,authidx,tagidx}
      \setcounter{songnum}{300}
      \input{content/songs_spanish.tex}
    \end{songs}

  \clearpage\scleardpage
  \songchapter{Português}
    \begin{songs}{titleidx,authidx,tagidx}
      \setcounter{songnum}{400}
      \input{content/songs_portuguese.tex}
    \end{songs}

  \clearpage\scleardpage
  \songchapter{Other}
    \begin{songs}{titleidx,authidx,tagidx}
      \setcounter{songnum}{500}
      \input{content/songs_other.tex}
    \end{songs}
    
  \clearpage\scleardpage
  \songchapter{Suomi}
    \begin{otherlanguage}{finnish} % set language to finnish for hyphenation etc
      \section{Lauluja}
        \begin{songs}{titleidx,authidx,tagidx}
          \setcounter{songnum}{600}
          \input{content/songs_suomi.tex}
          % larva's scribblings (remove later?):
          \input{content/songs_suomi_larva.tex}
        \end{songs}
      \clearpage\scleardpage
      \section{Muinaissuomalaista mytologiaa}
        \input{content/section_suomi_mytologiaa.tex}
      \clearpage\scleardpage
      \section{Runoja, loitsuja}
        \begin{songs}{titleidx,authidx,tagidx}
          \setcounter{songnum}{700}
          \chordsoff % do not show empty line for non-existing chords
          \renewcommand{\lyricfont}{\sffamily\small} % songs: modify lyrics font style
          \songcolumns{2}% two columns per page!
          % Make penalty for breaking column/page at any line of lyrics to be only slightly
          % higher than penalty for breaking between verses. The default for \interlinepenalty
          % is 1000, all other penalties are 200 by default.
          \interlinepenalty=201%
          \input{content/songs_suomi_runoja_loitsuja.tex}
          \interlinepenalty=1000 % back to default
          \songcolumns{1} % back to one column per page
          \renewcommand{\lyricfont}{\sffamily\large} % songs: modify lyrics font style
          \chordson
        \end{songs}
    \end{otherlanguage}

  \clearpage\scleardpage
  \songchapter{Technical information}
    \input{content/section_technical_information.tex}

  \clearpage
  \showindex[2]{Song Index}{titleidx} % song title index  
  % \showindex{Author Index}{authidx} % song author index
  \showindex[2]{Tag Index}{tagidx} % tags index

\end{document}
